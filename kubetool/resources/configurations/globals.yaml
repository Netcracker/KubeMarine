kubernetes_versions:
  v1.20:
    supported: true
  v1.21:
    supported: true
  v1.22:
    supported: true

connection:
  defaults:
    port: 22
    username: root
    timeout: 10
  bad_connection_exceptions:
    - Unable to connect to port
    - timed out
    - Network is unreachable
    - Error reading SSH protocol banner
    - Connection reset by peer
    - Connect fail
    - No existing session
    - encountered RSA key
    - Socket is closed
    - WinError 10060
etcd:
  default_arguments:
    cert: /etc/kubernetes/pki/etcd/server.crt
    key: /etc/kubernetes/pki/etcd/server.key
    cacert: /etc/kubernetes/pki/etcd/ca.crt
    peer_cert: /etc/kubernetes/pki/etcd/peer.crt
    peer_key: /etc/kubernetes/pki/etcd/peer.key
    peer_cacert: /etc/kubernetes/pki/etcd/ca.crt
  temporary_exceptions:
    - "etcdserver: leader changed"
    - "etcdserver: request timed out"
kubernetes:
  temporary_exceptions:
    - has prevented the request from succeeding
pods:
  allowed_failures: 10
  expect:
    kubernetes:
      timeout: 5
      retries: 30
    plugins:
      timeout: 5
      retries: 30
  critical_states:
    - Error
    - ErrImagePull
    - ImagePullBackOff
    - RunContainerError
    - InvalidImageName
    - CrashLoopBackOff
    - CreateContainerConfigError
nodes:
  expect:
    kubernetes_version:
      timeout: 10
      retries: 30
  ready:
    retries: 15
    timeout: 5
  boot:
    reboot_command: 'reboot 2>/dev/null >/dev/null &'
    defaults:
      timeout: 180
      delay_period: 5
  drain:
    timeout: 10
    grace_period: 60
  remove:
    check_active_timeout: 30
error_handling:
  failure_message: >
    An unexpected error occurred. It is failed to solve the problem automatically.
    Follow the instructions from the Troubleshooting Guide available to you.
    If it is impossible to solve the problem, provide the dump and the technical information above to the support team.

    You can restart the script from the last task with the following command:
    %s --tasks="%s"
keepalived:
  restart_wait: 5
  defaults:
    priority:
      max_value: 255
      step: 1
    label_size: 10
    password_size: 8
haproxy:
  restart_wait: 5
workaround:
  retries: 10
  delay_period: 5

compatibility_map:
  software:
    docker:
      v1.20.11:
        version_rhel: 19.03*
        version_rhel8: 19.03*
        version_debian: 5:19.03.*
      v1.21.5:
        version_rhel: 19.03*
        version_rhel8: 19.03*
        version_debian: 5:19.03.*
      v1.22.2:
        version_rhel: 19.03*
        version_rhel8: 19.03*
        version_debian: 5:19.03.*
    containerd:
      v1.20.11:
        version_rhel: 1.4.6*
        version_rhel8: 1.4.8*
        version_debian: 1.4.6*
      v1.21.5:
        version_rhel: 1.4.6*
        version_rhel8: 1.4.8*
        version_debian: 1.4.6*
      v1.22.2:
        version_rhel: 1.4.6*
        version_rhel8: 1.4.8*
        version_debian: 1.4.6*
    podman:
      v1.20.11:
        version_rhel: 1.6.4*
        version_rhel8: 3.0.1*
        version_debian: 100:3.1.2*
      v1.21.5:
        version_rhel: 1.6.4*
        version_rhel8: 3.0.1*
        version_debian: 100:3.1.2*
      v1.22.2:
        version_rhel: 1.6.4*
        version_rhel8: 3.0.1*
        version_debian: 100:3.1.2*
    haproxy:
      v1.20.11:
        version_rhel: 1.8*
        version_rhel8: 1.8*
        version_debian: 2.0.*
      v1.21.5:
        version_rhel: 1.8*
        version_rhel8: 1.8*
        version_debian: 2.0.*
      v1.22.2:
        version_rhel: 1.8*
        version_rhel8: 1.8*
        version_debian: 2.0.*
    keepalived:
      v1.20.11:
        version_rhel: 1.3*
        version_rhel8: 2.1*
        version_debian: 1:2.0.*
      v1.21.5:
        version_rhel: 1.3*
        version_rhel8: 2.1*
        version_debian: 1:2.0.*
      v1.22.2:
        version_rhel: 1.3*
        version_rhel8: 2.1*
        version_debian: 1:2.0.*
    crictl:
      v1.20.11:
        version: v1.20.0
        sha1: eaf4ffa1cfac5c69ec522d9562c8ee6ddd873f3e
      v1.21.5:
        version: v1.20.0
        sha1: eaf4ffa1cfac5c69ec522d9562c8ee6ddd873f3e
      v1.22.2:
        version: v1.22.0
        sha1: b840ddd1a8a35b12fd22d2657c7d17cb2f6f2e05
    kubeadm:
      v1.20.11:
        sha1: 59f904f50ea10cbc69007891301a2169f42f3537
      v1.21.5:
        sha1: 2ee056ac1d0b9c2289bdb03cb7bb0cd21ee29a8b
      v1.22.2:
        sha1: 190703cfe16ad00d0f91487d00bece9667cd5903
    kubelet:
      v1.20.11:
        sha1: 00c0b6a8dda55616343baafee9e9aa2775bc3c22
      v1.21.5:
        sha1: 61da22475b977cb678cca8cf7249bf727d72ee89
      v1.22.2:
        sha1: 41a2980963427a17c4fbce74aee6bb0bcf08b9ff
    kubectl:
      v1.20.11:
        sha1: 0feee9301e7f6cb6fba1d841a6fd8f378589145f
      v1.21.5:
        sha1: c4648e31ca16fb00e3826f8ab7c653da81eff367
      v1.22.2:
        sha1: de9b5c2fe2faefc2b4a61adf6f89144d3f0a09b1
    calico:
      v1.20:
        version: v3.19.1
        sha1: dde3851a977280f7c0d54538526bb9459fa7a7ac
      v1.21:
        version: v3.19.1
        sha1: dde3851a977280f7c0d54538526bb9459fa7a7ac
      v1.22:
        version: v3.20.1
        sha1: 4c5aec4da45c6ce45e03df2f36abb0010909b7db
    nginx-ingress-controller:
      v1.20:
        image-name: ingress-nginx/controller
        version: v1.0.3
        pod-name: ingress-nginx-controller
      v1.21:
        image-name: ingress-nginx/controller
        version: v1.0.3
        pod-name: ingress-nginx-controller
      v1.22:
        image-name: ingress-nginx/controller
        version: v1.0.3
        pod-name: ingress-nginx-controller
    kubernetes-dashboard:
      v1.20:
        version: v2.4.0
        metrics-scraper-version: v1.0.7
      v1.21:
        version: v2.4.0
        metrics-scraper-version: v1.0.7
      v1.22:
        version: v2.4.0
        metrics-scraper-version: v1.0.7
    local-path-provisioner:
      v1.20:
        version: v0.0.19
      v1.21:
        version: v0.0.19
      v1.22:
        version: v0.0.19
  hardware:
    minimal:
      balancer:
        amount: 1
        vcpu: 1
        ram: 1
      master:
        amount: 3
        vcpu: 2
        ram: 2
      worker:
        amount: 3
        vcpu: 4
        ram: 4
      vip:
        amount: 0
      all:
        amount: 3
    recommended:
      balancer:
        amount: 2
        vcpu: 2
        ram: 1
      master:
        amount: 3
        vcpu: 4
        ram: 4
      worker:
        amount: 3
        vcpu: 8
        ram: 8
      vip:
        amount: 1
      all:
        amount: 8

  distributives:
    centos:
      - os_family: 'rhel'
        versions:
          - '7.5'
          - '7.6'
          - '7.7'
          - '7.8'
          - '7.9'
      - os_family: 'rhel8'
        versions:
          - '8.4'
    rhel:
      - os_family: 'rhel'
        versions:
          - '7.5'
          - '7.6'
          - '7.7'
          - '7.8'
          - '7.9'
      - os_family: 'rhel8'
        versions:
          - '8.4'
    ubuntu:
      - os_family: 'debian'
        versions:
          - '20.04'
    debian:
      - os_family: 'debian'
        versions:
          - '10.9'
          - '10.10'
    ol:
      - os_family: 'rhel'
        versions:
          - '7.5'
          - '7.6'
          - '7.7'
          - '7.8'
          - '7.9'
      - os_family: 'rhel8'
        versions:
          - '8.4'

  network:
    connection:
      latency:
        single:
          critical: 10000
          recommended: 1000
        multi:
          critical: 15000
          recommended: 2000
    ports:
      internal:
        - 80
        - 443
        - 6443
        - 2379
        - 2380
        - 10250
        - 10251
        - 10252
        - [30000, 32767]
      external:
        - 80
        - 443
logging:
  default_targets:
    stdout:
      level: debug
      colorize: True
      correct_newlines: True
    dump:
      level: verbose
      format: "%(asctime)s %(process)s %(thread)s %(name)s %(levelname)s [%(module)s.%(funcName)s] %(message)s"
      colorize: False
      correct_newlines: True

prepull_group_size: 20
